-- [[ ·¥ò…™Íú±…™·¥õ  Íú±·¥è·¥ú ü  ·¥ò Ä·¥è·¥ä·¥á·¥Ñ·¥õ…™·¥è…¥ - FIXED MOVEMENT ]]
-- OWNER: ‡πÑ‡∏Å‡∏£‡∏™‡∏£ ‡∏û‡∏¥‡∏™‡∏¥‡∏©‡∏ê‡πå ü´°

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local IsActive = false
local FakeChar = nil
local RealPos = nil
local Speed = 1.5 -- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì

---------------------------------------------------------
-- [ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á ]
---------------------------------------------------------
local function CreateSoul()
    local Character = LocalPlayer.Character
    if not Character or not Character:FindFirstChild("HumanoidRootPart") then return end
    
    Character.Archivable = true
    RealPos = Character.HumanoidRootPart.CFrame -- ‡∏à‡∏≥‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á
    
    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á
    FakeChar = Character:Clone()
    FakeChar.Parent = workspace
    FakeChar.Name = "Soul_Projection_Pisit"
    
    -- ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏±‡∏ö‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏™
    for _, part in pairs(FakeChar:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
            part.Anchored = false -- ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Ñ‡πÑ‡∏ß‡πâ
            part.Transparency = 0.5
            part.Color = Color3.fromRGB(0, 255, 255)
        end
    end
    
    -- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á
    for _, part in pairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then part.Transparency = 1 end
    end
    Character.HumanoidRootPart.Anchored = true -- ‡∏•‡πá‡∏≠‡∏Ñ‡∏£‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°
end

local function RemoveSoul()
    if FakeChar then
        FakeChar:Destroy()
        FakeChar = nil
    end
    
    local Character = LocalPlayer.Character
    if Character then
        for _, part in pairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then part.Transparency = 0 end
        end
        Character.HumanoidRootPart.Anchored = false
        Character.HumanoidRootPart.CFrame = RealPos -- ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏°
    end
    workspace.CurrentCamera.CameraSubject = LocalPlayer.Character.Humanoid
end

---------------------------------------------------------
-- [ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (Fixed) ]
---------------------------------------------------------
RunService.RenderStepped:Connect(function()
    if IsActive and FakeChar and FakeChar:FindFirstChild("HumanoidRootPart") then
        local cam = workspace.CurrentCamera
        local hrp = FakeChar.HumanoidRootPart
        local moveDir = Vector3.new(0,0,0)
        
        -- ‡πÉ‡∏ä‡πâ CFrame ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏±‡∏ö‡πÅ‡∏ó‡∏ô Velocity ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ß‡∏£‡πå
        local look = cam.CFrame.LookVector
        local right = cam.CFrame.RightVector
        
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + Vector3.new(look.X, 0, look.Z) end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - Vector3.new(look.X, 0, look.Z) end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - Vector3.new(right.X, 0, right.Z) end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + Vector3.new(right.X, 0, right.Z) end
        
        if moveDir.Magnitude > 0 then
            hrp.CFrame = CFrame.new(hrp.Position, hrp.Position + moveDir) * CFrame.new(0, 0, -Speed)
        end
        
        -- ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏£‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì
        cam.CameraSubject = FakeChar.Humanoid
    end
end)

---------------------------------------------------------
-- [ ‡∏£‡∏∞‡∏ö‡∏ö UI ]
---------------------------------------------------------
if LocalPlayer.PlayerGui:FindFirstChild("PisitSoulUI") then
    LocalPlayer.PlayerGui.PisitSoulUI:Destroy()
end

local screenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
screenGui.Name = "PisitSoulUI"
screenGui.ResetOnSpawn = false

local mainBtn = Instance.new("TextButton", screenGui)
mainBtn.Size = UDim2.new(0, 130, 0, 50)
mainBtn.Position = UDim2.new(0.1, 0, 0.2, 0)
mainBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainBtn.Text = "‡∏£‡πà‡∏≤‡∏á‡∏ó‡∏î‡∏•‡∏≠‡∏á: OFF"
mainBtn.TextColor3 = Color3.new(1, 1, 1)
mainBtn.Font = "SourceSansBold"
mainBtn.TextSize = 16
Instance.new("UICorner", mainBtn)

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°
local dragging, dragInput, dragStart, startPos
mainBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true; dragStart = input.Position; startPos = mainBtn.Position
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        mainBtn.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
mainBtn.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)

-- ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î
mainBtn.MouseButton1Click:Connect(function()
    IsActive = not IsActive
    if IsActive then
        mainBtn.Text = "‡∏£‡πà‡∏≤‡∏á‡∏ó‡∏î‡∏•‡∏≠‡∏á: ON"
        mainBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
        CreateSoul()
    else
        mainBtn.Text = "‡∏£‡πà‡∏≤‡∏á‡∏ó‡∏î‡∏•‡∏≠‡∏á: OFF"
        mainBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        RemoveSoul()
    end
end)
