-- [[ ·¥ò…™Íú±…™·¥õ  Íú±·¥è·¥ú ü  ·¥ò Ä·¥è·¥ä·¥á·¥Ñ·¥õ…™·¥è…¥ - ‡∏£‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á ]]
-- OWNER: ‡πÑ‡∏Å‡∏£‡∏™‡∏£ ‡∏û‡∏¥‡∏™‡∏¥‡∏©‡∏ê‡πå ü´°

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local IsActive = false
local FakeChar = nil
local RealPos = nil

---------------------------------------------------------
-- [ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á ]
---------------------------------------------------------
local function CreateSoul()
    local Character = LocalPlayer.Character
    if not Character or not Character:FindFirstChild("HumanoidRootPart") then return end
    
    Character.Archivable = true
    RealPos = Character.HumanoidRootPart.CFrame
    
    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á
    FakeChar = Character:Clone()
    FakeChar.Parent = workspace
    FakeChar.Name = "Soul_Projection"
    
    -- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÉ‡∏™‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì
    for _, part in pairs(FakeChar:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
            part.Transparency = 0.5
            part.Color = Color3.fromRGB(0, 255, 255) -- ‡∏™‡∏µ‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì‡∏ü‡πâ‡∏≤‡πÜ
        end
    end
    
    -- ‡∏•‡πá‡∏≠‡∏Ñ‡∏£‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡πà‡∏≠‡∏á‡∏´‡∏ô
    for _, part in pairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Transparency = 1
        end
    end
    Character.HumanoidRootPart.Anchored = true
end

local function RemoveSoul()
    if FakeChar then
        FakeChar:Destroy()
        FakeChar = nil
    end
    
    -- ‡πÄ‡∏≠‡∏≤‡∏£‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
    local Character = LocalPlayer.Character
    if Character then
        for _, part in pairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Transparency = 0
            end
        end
        Character.HumanoidRootPart.Anchored = false
        Character.HumanoidRootPart.CFrame = RealPos
    end
end

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á
RunService.RenderStepped:Connect(function()
    if IsActive and FakeChar and FakeChar:FindFirstChild("HumanoidRootPart") then
        local cam = workspace.CurrentCamera
        local moveDir = Vector3.new(0,0,0)
        
        -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + cam.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - cam.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - cam.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + cam.CFrame.RightVector end
        
        if moveDir.Magnitude > 0 then
            moveDir = Vector3.new(moveDir.X, 0, moveDir.Z).Unit
            FakeChar.HumanoidRootPart.Velocity = moveDir * 50 -- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏£‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì
            FakeChar.HumanoidRootPart.CFrame = CFrame.new(FakeChar.HumanoidRootPart.Position, FakeChar.HumanoidRootPart.Position + moveDir)
        else
            FakeChar.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
        end
        
        -- ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì
        cam.CameraSubject = FakeChar.Humanoid
    else
        if LocalPlayer.Character then
            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character.Humanoid
        end
    end
end)

---------------------------------------------------------
-- [ ‡∏£‡∏∞‡∏ö‡∏ö UI ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢ ]
---------------------------------------------------------
if LocalPlayer.PlayerGui:FindFirstChild("PisitSoulUI") then
    LocalPlayer.PlayerGui.PisitSoulUI:Destroy()
end

local screenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
screenGui.Name = "PisitSoulUI"
screenGui.ResetOnSpawn = false

local mainBtn = Instance.new("TextButton", screenGui)
mainBtn.Size = UDim2.new(0, 120, 0, 50)
mainBtn.Position = UDim2.new(0.1, 0, 0.2, 0)
mainBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainBtn.Text = "SOUL: OFF"
mainBtn.TextColor3 = Color3.new(1, 1, 1)
mainBtn.Font = "SourceSansBold"
mainBtn.TextSize = 18
Instance.new("UICorner", mainBtn)

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°
local dragging, dragInput, dragStart, startPos
mainBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true; dragStart = input.Position; startPos = mainBtn.Position
    end
end)
mainBtn.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        mainBtn.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
UserInputService.InputEnded:Connect(function(input) if input.UserInputState == Enum.UserInputState.End then dragging = false end end)

-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î
mainBtn.MouseButton1Click:Connect(function()
    IsActive = not IsActive
    if IsActive then
        mainBtn.Text = "SOUL: ON"
        mainBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
        CreateSoul()
    else
        mainBtn.Text = "SOUL: OFF"
        mainBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        RemoveSoul()
    end
end)
